!function(){function n(n){n.element.innerHTML=n.displayHTML,n.onRender(n.element)}function e(n,e,i){let t=n.changeLog.length-1,a=e+i;do{let i=n.changeLog[t];if(e<=i.timestamp&&i.timestamp<=a)return i.text;t--}while(t>=0);return null}function i(i,t){let a=i.recordingData,r=e(a,i.runningTimeStamp,i.interval);null!==r&&(i.displayHTML=r,n(i)),i.onPlay(i.runningTimeStamp,i.recordingData.endTimestampMS),i.runningTimeStamp+=i.interval,i.runningTimeStamp>a.endTimestampMS&&(t?(i.runningTimeStamp=0,i.displayHTML=a.initialText):(i.onPlay(i.recordingData.endTimestampMS,i.recordingData.endTimestampMS),clearInterval(i.timer)))}function t(t,a,r,l){clearInterval(t.timer),t.runningTimeStamp=a,t.displayHTML=0===a?t.recordingData.initialText?t.recordingData.initialText:"":e(t.recordingData,t.runningTimeStamp,t.interval),n(t),t.onPlay(t.runningTimeStamp,t.recordingData.endTimestampMS),r&&(t.timer=setInterval(()=>i(t,l),t.interval))}window.rotoscodejs=function(e){let a={interval:e.interval?e.interval:100,element:e.element,recordingData:e.recordingData,runningTimeStamp:0,displayHTML:e.recordingData.initialText?e.recordingData.initialText:"",timer:null,onRender:e.onRender?e.onRender:()=>{},onPlay:e.onPlay?e.onPlay:()=>{}};""!==a.displayHTML&&n(a);let r=!1,l=!1;return{play:function(n){r=!0,l=n,clearInterval(a.timer),a.timer=setInterval(()=>i(a,n),a.interval)},pause:function(){r=!1,l=!1,clearInterval(a.timer)},jump:function(n){r=!1,l=!1,n>a.recordingData.endTimestampMS?n=a.recordingData.endTimestampMS:n<0&&(n=0),t(a,n,r,l)},stop:function(){r=!1,l=!1,t(a,a.recordingData.endTimestampMS,r,l)},updateData:function(n){r=!1,l=!1,a.recordingData=n,a.displayHTML=n.initialText?n.initialText:"",a.runningTimeStamp=0,t(a,a.runningTimeStamp,r,l)}}}}();